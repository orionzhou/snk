#### General/shared rules ####
tmpdir: /scratch.global/zhoux379/temp
email: zhoux379@umn.edu
java:
  mem: 8
  tmpdir: /scratch.global/zhoux379/temp
dirl: logs
dirp: pbs
dird: data
zip_re: (\.gz|\.zip|\.bz2)
valid:
  source:
    - sra
    - local
    - local_interleaved
  stranded:
    - 'yes'
    - 'no'
    - 'reverse'
  readtype:
    - illumina
    - solid
    - 3rnaseq
  mapper:
    - star
    - hisat2
    - bwa
    - bismark
## genomes
dirg: /home/springer/zhoux379/data/genome
genomes:
  B73:
    chroms: B01 B02 B03 B04 B05 B06 B07 B08 B09 B10 B99
    annotation: True
  Mo17:
    chroms: M01 M02 M03 M04 M05 M06 M07 M08 M09 M10 M99
    annotation: True
  W22:
    chroms: W01 W02 W03 W04 W05 W06 W07 W08 W09 W10 W99
    annotation: True
  PH207:
    chroms: P01 P02 P03 P04 P05 P06 P07 P08 P09 P10 P99
    annotation: True
  PHB47:
    annotation: True
  B104:
    annotation: True
  CML247:
    annotation: False
  DK105:
    annotation: False
  EP1:
    annotation: False
  F7:
    annotation: False
  PE0075:
    annotation: False
  Sbicolor:
    annotation: True
  Osativa:
    annotation: True
## fastq utilities
fastq:
  odir: 10_fastq
fq_compress:
  id: fqc
  odir: 09_fq_compress
  ppn: 6
  runtime: 5
  mem: 30
  aruntime: 10
  amem: 5
fq_dump_slow:
  id: fqdl
  odir: 09_fq_dump_slow
  ppn: 1
  runtime: 20
  mem: 20
  aruntime: 10
  amem: 5
  load: 20
fq_dump:
  id: fqd
  odir: 09_fq_dump
  ppn: 4
  runtime: 10
  mem: 11
  aruntime: 10
  amem: 0
  load: 10
fq_deinterleave:
  id: fqv
  odir: 09_fq_deinterleave
  extra: ''
  ppn: 10
  runtime: 10
  mem: 20
  aruntime: 10
  amem: 2
fastqc:
  id: fqc
  idir: 14_trim
  extra: ''
  ppn: 1
  runtime: 5
  mem: 10
  aruntime: 10
  amem: 0
## trimming
trimming:
  idir: 10_fastq
  odir: 15_trim
fastp:
  id: fp
  odir: 14_fastp
  ppn: 8
  runtime: 12
  mem: 20
  aruntime: 10
  amem: 0
trimmomatic:
  id: trimm
  odir: 14_trimmomatic
  adapter_pe: /home/springer/zhoux379/software/miniconda3/share/trimmomatic/adapters/TruSeq3-PE.fa
  adapter_se: /home/springer/zhoux379/software/miniconda3/share/trimmomatic/adapters/TruSeq3-SE.fa
  ppn: 8
  runtime: 12
  mem: 20
  aruntime: 10
  amem: 20
bbduk:
  id: bbduk
  odir: 14_bbduk
  cmd: bbduk.sh
  refs:
      - /home/springer/zhoux379/source/bbmap/resources/polyA.fa.gz
      - /home/springer/zhoux379/source/bbmap/resources/truseq.fa.gz
  extra: k=13 ktrim=r useshortkmers=t mink=5 qtrim=r trimq=10 minlength=20
  ppn: 1
  runtime: 12
  mem: 10
  aruntime: 10
  amem: 5
merge_trimstats:
  id: merge_trim
  out: trimming.tsv
## mapping, align, bam
mapping:
  idir: 15_trim
  odir: 22_bam
blat:
  id: blat
  xdir: blat
  xpre: db
  x.2bit: db.2bit
  x.ooc: db.2bit.tile11.ooc
  runtime: 12
  mem: 10
  aruntime: 10
  amem: 5
blastn:
  id: blastn
  xdir: blastn
  xpre: db
  xout: db.nsq
  ppn: 8
  runtime: 5
  mem: 30
  aruntime: 10
  amem: 5
blastp:
  id: blastp
  xdir: blastp
  xpre: db
  xout: db.psq
  ppn: 8
  runtime: 5
  mem: 30
  aruntime: 10
  amem: 5
bowtie2:
  id: bowti
  xdir: bowtie2
  ppn: 4
  runtime: 20
  mem: 20
  aruntime: 10
  amem: 5
bwa:
  id: bwa
  xdir: bwa
  xpre: db
  xout: db.bwt
  odir: 21_bwa
  extra: ''
  ppn: 12
  runtime: 25
  mem: 30
  aruntime: 15
  amem: 2
  aq: 0
star:
  id: star
  xdir: star
  xpre: ''
  xout: SA
  odir: 21_star
  extra: "--outSAMmapqUnique 60
      --outFilterType BySJout 
      --outFilterMultimapNmax 20 
      --alignSJoverhangMin 8 
      --alignSJDBoverhangMin 1 
      --outFilterMismatchNmax 999 
      --outFilterMismatchNoverReadLmax 1.0 
      --alignIntronMin 20 
      --alignIntronMax 1000000 
      --alignMatesGapMax 1000000 
      --outSAMunmapped Within KeepPairs"
  ppn: 8
  runtime: 15
  mem: 30
  aruntime: 5
  amem: 5
hisat2:
  id: hisat
  xdir: hisat2
  xpre: db
  xout: db.1.ht2
  odir: 21_hisat2
  extra: --new-summary
  ppn: 8
  runtime: 15
  mem: 20
  aruntime: 15
  amem: 5
bismark:
  id: bsm
  xdir: bismark
  xpre: ''
  xout: Bisulfite_Genome/CT_conversion/BS_CT.rev.2.bt2
  odir: 21_bismark
  extra: -n 1
  ppn: 8
  runtime: 30
  mem: 30
  aruntime: 10
  amem: 10
sambamba:
  ppn: 8
  runtime: 8
  mem: 12
  aruntime: 8
  amem: 0
  sort:
    id: sbbS
    extra: -m 11GB
  merge:
    id: sbbM
    extra: ''
  flagstat:
    id: sbbF
    extra: ''
    runtime: 4
bam_stat:
  id: bamst
  ppn: 1
  runtime: 8
  mem: 15
  aruntime: 2
  amem: 10
merge_bamstats:
  id: merge_bamst
  out: bamstats.tsv
  outv: bamstats_v.tsv
## rnaseq profiling
featurecounts:
  id: fCnt
  idir: 22_bam
  odir: 31_featurecounts
  extra: --primary -Q 20 -t exon -g gene_id --byReadGroup
  ppn: 4
  runtime: 5
  mem: 15
  aruntime: 10
  amem: 10
merge_featurecounts:
  id: mergF
  out: featurecounts.tsv
  ppn: 1
  runtime: 3
  mem: 10
rc2cpm:
  id: rc2cpm
  out_raw: cpm_raw.rds
  out: cpm.rds
  ppn: 1
  runtime: 2
  mem: 30
  aruntime: 0
  amem: 10
ase:
  id: ase
  idir: 22_bam
  odir: 33_ase
  gene_bed: /home/springer/zhoux379/data/genome/B73/50_annotation/10.ase.bed
  vdir: /home/springer/zhoux379/projects/biomap/data/variants/ase29
  vdir2: /home/springer/zhoux379/projects/biomap/data/variants/ase35
  ppn: 1
  runtime: 20
  mem: 20
  aruntime: 10
  amem: 0
merge_ase:
  id: merge_ase
  idir: 33_ase
  out: ase.tsv
## methylation profiling
bismark_extract:
  id: bsm_me
  idir: 23_mark_dup
  odir: 31_bismark_extract
  ppn: 8
  runtime: 20
  mem: 30
  aruntime: 10
  amem: 10
# variant calling
cleanbam:
  id: cBam
  odir1: 23_mark_dup
  odir2: 24_base_recal
callvnt:
  id: callv
  odir: 25_gvcf
  odir1: 26_gvcf_rename
  odir2: 27_gvcf_by_region
  odir3: 28_vcf_by_region
  out: 30.vcf.gz
bcftools:
  call:
    id: bcfCa
    ppn: 1
    runtime: 60
    mem: 50
  merge:
    id: bcfM
    ppn: 2
    runtime: 23
    mem: 20
  concat:
    id: bcfCo
    ppn: 1
    runtime: 10
    mem: 15
  gtcheck:
    id: bcfGt
    odir: 27_gtcheck
    vcf: /home/springer/zhoux379/projects/biomap/data/variants/62biomAP.snp.vcf.gz
    extra: -G 1
    ppn: 1
    runtime: 1
    mem: 5
gatk:
  xdir: gatk
  xref: db.fasta
  xref.fai: db.fasta.fai
  xref.dict: db.dict
  known_sites: known_sites.vcf.gz
  cmd: gatk
  mark_duplicates:
    id: markD
    picard: True
    ppn: 1
    runtime: 15
    mem: 20
    load: 2
    aruntime: 5
    amem: 1
  base_recalibrator:
    id: baseR
    ppn: 1
    runtime: 20
    mem: 20
    aruntime: 5
    amem: 0
  apply_bqsr:
    id: applB
    ppn: 1
    runtime: 20
    mem: 20
    aruntime: 5
    amem: 0
  haplotype_caller:
    id: haplC
    ppn: 1
    runtime: 40
    mem: 15
    aruntime: 15
    amem: 2
  merge_vcfs:
    id: mergV
    picard: True
    ppn: 1
    runtime: 5
    mem: 30
    aruntime: 10
    amem: 0
  rename_sample_id:
    id: renaS
    ppn: 1
    runtime: 20
    mem: 15
    aruntime: 10
    amem: 2
  combine_gvcfs:
    id: combG
    ppn: 1
    runtime: 15
    mem: 60
    aruntime: 10
    amem: 100
    aq: 1
  genotype_gvcfs:
    id: genoG
    ppn: 1
    runtime: 30
    mem: 30
    aruntime: 10
    amem: 5
  variant_filtration:
    id: variF
    ppn: 1
    runtime: 5
    mem: 20
    aruntime: 5
    amem: 5
snpeff:
  id: snpeff
  xdir: snpeff
  xcfg: snpEff.config
  xout: snpEffectPredictor.bin
  idir: xxx
  odir: yyy
  ppn: 1
  runtime: 20
  mem: 30
  aruntime: 10
  amem: 5
# statistics & reports
multiqc:
  id: multiqc
  out: multiqc.html
  ppn: 1
  runtime: 10
  mem: 15
  aruntime: 10
  amem: 10

